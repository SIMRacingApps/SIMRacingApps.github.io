<!doctype html>
<html>
  <head>
    <base href="../">
    <title>JSDoc: source : FuelTank.js</title>
    <link type="text/css" rel="stylesheet" href="css/jsdoc-default.css">
    <link href="css/prettify-tomorrow.css" type="text/css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,400,300,700" rel="stylesheet" type="text/css">
    <link href="css/custom.css" type="text/css" rel="stylesheet">
    <script src="js/prettify.js"></script>
    <script src="js/angular.min.js"></script>
  </head>
  <body ng-app="">
    <nav>
      <h2><a href="index.html">Index</a></h2>
      <ul class="module">
        <!-- undefined -->
        <h3>
          <a href="" ng-click="moduleundefined = !moduleundefined">
            module: undefined
          </a>
          <i ng-cloak="" ng-show="moduleundefined">+</i>
        </h3>
        <li id="undefined" ng-hide="moduleundefined">
          <ul class="group">
            <h3>
              <a href="" ng-click="undefinedapps = !undefinedapps">
                apps
              </a>
              <i ng-cloak="" ng-show="undefinedapps">+</i>
            </h3>
            <ul ng-hide="undefinedapps">
              <li>
                <a href="CrewChief.html">CrewChief</a>
              </li><li>
                <a href="CrewChief-Large.html">CrewChief-Large</a>
              </li><li>
                <a href="Dash-BarGauges-DigitalOverlay.html">Dash-BarGauges-DigitalOverlay</a>
              </li><li>
                <a href="Dash-Gauges-Spek.html">Dash-Gauges-Spek</a>
              </li><li>
                <a href="Dash-Gauges-Spek-Horizontal.html">Dash-Gauges-Spek-Horizontal</a>
              </li><li>
                <a href="Dash-Minimum.html">Dash-Minimum</a>
              </li><li>
                <a href="Dash-Small.html">Dash-Small</a>
              </li><li>
                <a href="Dash-StockCars-DigitalOverlay.html">Dash-StockCars-DigitalOverlay</a>
              </li><li>
                <a href="NASCAR-Analog-Dash.html">NASCAR-Analog-Dash</a>
              </li><li>
                <a href="NASCAR-Digital-Dash.html">NASCAR-Digital-Dash</a>
              </li><li>
                <a href="RaceAdministrator.html">RaceAdministrator</a>
              </li><li>
                <a href="Spectator.html">Spectator</a>
              </li><li>
                <a href="Spectator60.html">Spectator60</a>
              </li><li>
                <a href="Spotter.html">Spotter</a>
              </li><li>
                <a href="Spotter60.html">Spotter60</a>
              </li><li>
                <a href="StreamingOverlay.html">StreamingOverlay</a>
              </li>
            </ul>
          </ul><ul class="group">
            <h3>
              <a href="" ng-click="undefineddirective = !undefineddirective">
                directive
              </a>
              <i ng-cloak="" ng-show="undefineddirective">+</i>
            </h3>
            <ul ng-hide="undefineddirective">
              <li>
                <a href="sra-a-b-s-active.html">sra-a-b-s-active</a>
              </li><li>
                <a href="sra-analog-gauge.html">sra-analog-gauge</a>
              </li><li>
                <a href="sra-analog-gauge-spek-brake-pressure.html">sra-analog-gauge-spek-brake-pressure</a>
              </li><li>
                <a href="sra-analog-gauge-spek-fuel-level.html">sra-analog-gauge-spek-fuel-level</a>
              </li><li>
                <a href="sra-analog-gauge-spek-fuel-pressure.html">sra-analog-gauge-spek-fuel-pressure</a>
              </li><li>
                <a href="sra-analog-gauge-spek-h-y-s-charge.html">sra-analog-gauge-spek-h-y-s-charge</a>
              </li><li>
                <a href="sra-analog-gauge-spek-h-y-s-deployment.html">sra-analog-gauge-spek-h-y-s-deployment</a>
              </li><li>
                <a href="sra-analog-gauge-spek-oil-level.html">sra-analog-gauge-spek-oil-level</a>
              </li><li>
                <a href="sra-analog-gauge-spek-oil-pressure.html">sra-analog-gauge-spek-oil-pressure</a>
              </li><li>
                <a href="sra-analog-gauge-spek-oil-temp.html">sra-analog-gauge-spek-oil-temp</a>
              </li><li>
                <a href="sra-analog-gauge-spek-speedometer.html">sra-analog-gauge-spek-speedometer</a>
              </li><li>
                <a href="sra-analog-gauge-spek-tachometer.html">sra-analog-gauge-spek-tachometer</a>
              </li><li>
                <a href="sra-analog-gauge-spek-voltage.html">sra-analog-gauge-spek-voltage</a>
              </li><li>
                <a href="sra-analog-gauge-spek-water-level.html">sra-analog-gauge-spek-water-level</a>
              </li><li>
                <a href="sra-analog-gauge-spek-water-pressure.html">sra-analog-gauge-spek-water-pressure</a>
              </li><li>
                <a href="sra-analog-gauge-spek-water-temp.html">sra-analog-gauge-spek-water-temp</a>
              </li><li>
                <a href="sra-bar-gauge.html">sra-bar-gauge</a>
              </li><li>
                <a href="sra-bar-gauge-brake-pressure.html">sra-bar-gauge-brake-pressure</a>
              </li><li>
                <a href="sra-bar-gauge-fuel-level.html">sra-bar-gauge-fuel-level</a>
              </li><li>
                <a href="sra-bar-gauge-fuel-pressure.html">sra-bar-gauge-fuel-pressure</a>
              </li><li>
                <a href="sra-bar-gauge-h-y-s-charge.html">sra-bar-gauge-h-y-s-charge</a>
              </li><li>
                <a href="sra-bar-gauge-h-y-s-deployment.html">sra-bar-gauge-h-y-s-deployment</a>
              </li><li>
                <a href="sra-bar-gauge-oil-level.html">sra-bar-gauge-oil-level</a>
              </li><li>
                <a href="sra-bar-gauge-oil-pressure.html">sra-bar-gauge-oil-pressure</a>
              </li><li>
                <a href="sra-bar-gauge-oil-temp.html">sra-bar-gauge-oil-temp</a>
              </li><li>
                <a href="sra-bar-gauge-speedometer.html">sra-bar-gauge-speedometer</a>
              </li><li>
                <a href="sra-bar-gauge-tachometer.html">sra-bar-gauge-tachometer</a>
              </li><li>
                <a href="sra-bar-gauge-voltage.html">sra-bar-gauge-voltage</a>
              </li><li>
                <a href="sra-bar-gauge-water-level.html">sra-bar-gauge-water-level</a>
              </li><li>
                <a href="sra-bar-gauge-water-pressure.html">sra-bar-gauge-water-pressure</a>
              </li><li>
                <a href="sra-bar-gauge-water-temp.html">sra-bar-gauge-water-temp</a>
              </li><li>
                <a href="sra-camera-selector.html">sra-camera-selector</a>
              </li><li>
                <a href="sra-camera-selector30.html">sra-camera-selector30</a>
              </li><li>
                <a href="sra-camera-selector-vertical30.html">sra-camera-selector-vertical30</a>
              </li><li>
                <a href="sra-car-controls.html">sra-car-controls</a>
              </li><li>
                <a href="sra-car-image.html">sra-car-image</a>
              </li><li>
                <a href="sra-car-image-extended.html">sra-car-image-extended</a>
              </li><li>
                <a href="sra-car-left.html">sra-car-left</a>
              </li><li>
                <a href="sra-car-number.html">sra-car-number</a>
              </li><li>
                <a href="sra-car-number-extended.html">sra-car-number-extended</a>
              </li><li>
                <a href="sra-car-right.html">sra-car-right</a>
              </li><li>
                <a href="sra-car-selector.html">sra-car-selector</a>
              </li><li>
                <a href="sra-car-selector64.html">sra-car-selector64</a>
              </li><li>
                <a href="sra-car-selector-images.html">sra-car-selector-images</a>
              </li><li>
                <a href="sra-car-selector-images64.html">sra-car-selector-images64</a>
              </li><li>
                <a href="sra-car-telemetry.html">sra-car-telemetry</a>
              </li><li>
                <a href="sra-chart-test.html">sra-chart-test</a>
              </li><li>
                <a href="sra-chat.html">sra-chat</a>
              </li><li>
                <a href="sra-compteur.html">sra-compteur</a>
              </li><li>
                <a href="sra-data-table.html">sra-data-table</a>
              </li><li>
                <a href="sra-driver-info.html">sra-driver-info</a>
              </li><li>
                <a href="sra-driver-rating.html">sra-driver-rating</a>
              </li><li>
                <a href="sra-flags.html">sra-flags</a>
              </li><li>
                <a href="sra-flags-bar.html">sra-flags-bar</a>
              </li><li>
                <a href="sra-flags-bar-horizontal.html">sra-flags-bar-horizontal</a>
              </li><li>
                <a href="sra-fuel-tank.html">sra-fuel-tank</a>
              </li><li>
                <a href="sra-gear.html">sra-gear</a>
              </li><li>
                <a href="sra-gforce.html">sra-gforce</a>
              </li><li>
                <a href="sra-in-car-adjustments.html">sra-in-car-adjustments</a>
              </li><li>
                <a href="sra-in-garage.html">sra-in-garage</a>
              </li><li>
                <a href="sra-incidents.html">sra-incidents</a>
              </li><li>
                <a href="sra-lap-times.html">sra-lap-times</a>
              </li><li>
                <a href="sra-lap-timing.html">sra-lap-timing</a>
              </li><li>
                <a href="sra-laps-banner.html">sra-laps-banner</a>
              </li><li>
                <a href="sra-messages.html">sra-messages</a>
              </li><li>
                <a href="sra-pedals.html">sra-pedals</a>
              </li><li>
                <a href="sra-pit-commander.html">sra-pit-commander</a>
              </li><li>
                <a href="sra-pit-road.html">sra-pit-road</a>
              </li><li>
                <a href="sra-pit-road-lights.html">sra-pit-road-lights</a>
              </li><li>
                <a href="sra-radio-control.html">sra-radio-control</a>
              </li><li>
                <a href="sra-radio-transmitting.html">sra-radio-transmitting</a>
              </li><li>
                <a href="sra-relative.html">sra-relative</a>
              </li><li>
                <a href="sra-relative-small.html">sra-relative-small</a>
              </li><li>
                <a href="sra-replay-control.html">sra-replay-control</a>
              </li><li>
                <a href="sra-s-i-m-state.html">sra-s-i-m-state</a>
              </li><li>
                <a href="sra-s-i-m-time.html">sra-s-i-m-time</a>
              </li><li>
                <a href="sra-s-r-a-logo.html">sra-s-r-a-logo</a>
              </li><li>
                <a href="sra-s-r-a-logo-u-r-l.html">sra-s-r-a-logo-u-r-l</a>
              </li><li>
                <a href="sra-shift-light.html">sra-shift-light</a>
              </li><li>
                <a href="sra-shift-lights.html">sra-shift-lights</a>
              </li><li>
                <a href="sra-standings.html">sra-standings</a>
              </li><li>
                <a href="sra-standings-banner.html">sra-standings-banner</a>
              </li><li>
                <a href="sra-standings-banner-class-vertical.html">sra-standings-banner-class-vertical</a>
              </li><li>
                <a href="sra-standings-banner-class-vertical20.html">sra-standings-banner-class-vertical20</a>
              </li><li>
                <a href="sra-standings-banner-vertical.html">sra-standings-banner-vertical</a>
              </li><li>
                <a href="sra-standings-banner-vertical20.html">sra-standings-banner-vertical20</a>
              </li><li>
                <a href="sra-standings-top-10.html">sra-standings-top-10</a>
              </li><li>
                <a href="sra-standings-top-20.html">sra-standings-top-20</a>
              </li><li>
                <a href="sra-standings-top-35.html">sra-standings-top-35</a>
              </li><li>
                <a href="sra-standings-top-43.html">sra-standings-top-43</a>
              </li><li>
                <a href="sra-standings-top-60.html">sra-standings-top-60</a>
              </li><li>
                <a href="sra-steering-wheel.html">sra-steering-wheel</a>
              </li><li>
                <a href="sra-team-speak-talking.html">sra-team-speak-talking</a>
              </li><li>
                <a href="sra-template.html">sra-template</a>
              </li><li>
                <a href="sra-text-gauge.html">sra-text-gauge</a>
              </li><li>
                <a href="sra-text-gauge-brake-bias-adjustment.html">sra-text-gauge-brake-bias-adjustment</a>
              </li><li>
                <a href="sra-text-gauge-brake-pressure.html">sra-text-gauge-brake-pressure</a>
              </li><li>
                <a href="sra-text-gauge-fuel-level.html">sra-text-gauge-fuel-level</a>
              </li><li>
                <a href="sra-text-gauge-fuel-pressure.html">sra-text-gauge-fuel-pressure</a>
              </li><li>
                <a href="sra-text-gauge-h-y-s-charge.html">sra-text-gauge-h-y-s-charge</a>
              </li><li>
                <a href="sra-text-gauge-h-y-s-deployment.html">sra-text-gauge-h-y-s-deployment</a>
              </li><li>
                <a href="sra-text-gauge-oil-level.html">sra-text-gauge-oil-level</a>
              </li><li>
                <a href="sra-text-gauge-oil-pressure.html">sra-text-gauge-oil-pressure</a>
              </li><li>
                <a href="sra-text-gauge-oil-temp.html">sra-text-gauge-oil-temp</a>
              </li><li>
                <a href="sra-text-gauge-speedometer.html">sra-text-gauge-speedometer</a>
              </li><li>
                <a href="sra-text-gauge-tachometer.html">sra-text-gauge-tachometer</a>
              </li><li>
                <a href="sra-text-gauge-voltage.html">sra-text-gauge-voltage</a>
              </li><li>
                <a href="sra-text-gauge-water-level.html">sra-text-gauge-water-level</a>
              </li><li>
                <a href="sra-text-gauge-water-pressure.html">sra-text-gauge-water-pressure</a>
              </li><li>
                <a href="sra-text-gauge-water-temp.html">sra-text-gauge-water-temp</a>
              </li><li>
                <a href="sra-time.html">sra-time</a>
              </li><li>
                <a href="sra-timing-delta.html">sra-timing-delta</a>
              </li><li>
                <a href="sra-tire.html">sra-tire</a>
              </li><li>
                <a href="sra-tire-compound.html">sra-tire-compound</a>
              </li><li>
                <a href="sra-tire-measurements.html">sra-tire-measurements</a>
              </li><li>
                <a href="sra-track-map.html">sra-track-map</a>
              </li><li>
                <a href="sra-track-map-car.html">sra-track-map-car</a>
              </li><li>
                <a href="sra-track-map-finish-line.html">sra-track-map-finish-line</a>
              </li><li>
                <a href="sra-track-map-merge-point.html">sra-track-map-merge-point</a>
              </li><li>
                <a href="sra-track-map-sector.html">sra-track-map-sector</a>
              </li><li>
                <a href="sra-waiting-for-s-i-m.html">sra-waiting-for-s-i-m</a>
              </li><li>
                <a href="sra-weather-info.html">sra-weather-info</a>
              </li><li>
                <a href="sra-wind-gauge.html">sra-wind-gauge</a>
              </li>
            </ul>
          </ul>
        </li>
      </ul><ul class="module">
        <!-- module_____acing_pps -->
        <h3>
          <a href="" ng-click="modulemodule_____acing_pps = !modulemodule_____acing_pps">
            module: module:SIMRacingApps
          </a>
          <i ng-cloak="" ng-show="modulemodule_____acing_pps">+</i>
        </h3>
        <li id="module:SIMRacingApps" ng-hide="modulemodule_____acing_pps">
          <ul class="group">
            <h3>
              <a href="" ng-click="module_____acing_ppsfilter = !module_____acing_ppsfilter">
                filter
              </a>
              <i ng-cloak="" ng-show="module_____acing_ppsfilter">+</i>
            </h3>
            <ul ng-hide="module_____acing_ppsfilter">
              <li>
                <a href="module-SIMRacingApps.sraCeil.html">sraCeil</a>
              </li><li>
                <a href="module-SIMRacingApps.sraDate.html">sraDate</a>
              </li><li>
                <a href="module-SIMRacingApps.sraDebug.html">sraDebug</a>
              </li><li>
                <a href="module-SIMRacingApps.sraDecodeEntities.html">sraDecodeEntities</a>
              </li><li>
                <a href="module-SIMRacingApps.sraDuration.html">sraDuration</a>
              </li><li>
                <a href="module-SIMRacingApps.sraEncodeEntities.html">sraEncodeEntities</a>
              </li><li>
                <a href="module-SIMRacingApps.sraFloor.html">sraFloor</a>
              </li><li>
                <a href="module-SIMRacingApps.sraHex.html">sraHex</a>
              </li><li>
                <a href="module-SIMRacingApps.sraLowerCase.html">sraLowerCase</a>
              </li><li>
                <a href="module-SIMRacingApps.sraLPad.html">sraLPad</a>
              </li><li>
                <a href="module-SIMRacingApps.sraNumber.html">sraNumber</a>
              </li><li>
                <a href="module-SIMRacingApps.sraRGB.html">sraRGB</a>
              </li><li>
                <a href="module-SIMRacingApps.sraRound.html">sraRound</a>
              </li><li>
                <a href="module-SIMRacingApps.sraRPad.html">sraRPad</a>
              </li><li>
                <a href="module-SIMRacingApps.sraUpperCase.html">sraUpperCase</a>
              </li>
            </ul>
          </ul><ul class="group">
            <h3>
              <a href="" ng-click="module_____acing_ppsdirective = !module_____acing_ppsdirective">
                directive
              </a>
              <i ng-cloak="" ng-show="module_____acing_ppsdirective">+</i>
            </h3>
            <ul ng-hide="module_____acing_ppsdirective">
              <li>
                <a href="module-SIMRacingApps-sra-data.html">sra-data</a>
              </li><li>
                <a href="module-SIMRacingApps-sra-horizontal-align.html">sra-horizontal-align</a>
              </li><li>
                <a href="module-SIMRacingApps-sra-resize.html">sra-resize</a>
              </li><li>
                <a href="module-SIMRacingApps-sra-vertical-align.html">sra-vertical-align</a>
              </li>
            </ul>
          </ul><ul class="group">
            <h3>
              <a href="" ng-click="module_____acing_ppscontroller = !module_____acing_ppscontroller">
                controller
              </a>
              <i ng-cloak="" ng-show="module_____acing_ppscontroller">+</i>
            </h3>
            <ul ng-hide="module_____acing_ppscontroller">
              <li>
                <a href="module-SIMRacingApps-sraController.html">sraController</a>
              </li>
            </ul>
          </ul><ul class="group">
            <h3>
              <a href="" ng-click="module_____acing_ppsfactory = !module_____acing_ppsfactory">
                factory
              </a>
              <i ng-cloak="" ng-show="module_____acing_ppsfactory">+</i>
            </h3>
            <ul ng-hide="module_____acing_ppsfactory">
              <li>
                <a href="module-SIMRacingApps-sraDispatcher.html">sraDispatcher</a>
              </li>
            </ul>
          </ul>
        </li>
      </ul>
    </nav>
    <div id="content" class="page-wrap">
      <h1 class="title">
        source : FuelTank.js
      </h1>
      <div id="main" class="big-container">
        <!-- source code html -->
        <article>
          <pre class="prettyprint source linenums"><code>'use strict';/** * This widget displays a virtual fuel tank/cell.  * The blue represents the fuel level in the tank. * The red represents what will be added on the next pit stop. * The darkened checkered area represents the amount of fuel needed to finish the race.  * If this area extends out of the blue area, then you will need to add fuel to finish. * The green area is where you have no fuel. You can click within this area to add fuel to that point. * &lt;p> * Clicking or Touching the blue area, will toggle between request full tank and none. * Clicking above the blue, but within the checkered, adds the smallest amount needed to finish. * Clicking in the green area will add fuel to the point where you clicked. * &lt;p> * Several fuel mileage calculations are also shown, such as, the number of laps remaining base on fuel in the tank. * Also, the number of laps per full tank, as well as alternate number of laps remaining based on a different number of laps to average. * &lt;p> * By default, fuel mileage is calculated based on the worst lap that was not a out lap or caution lap, or a damaged lap. * This is indicated by the number of laps to average of zero(0). * Also by default, the alternate calculation is based on the last 2 laps averaged.  * Useful if saving fuel, you can see how far you can go if you continue to save at the same rate. * Both of these can be changed using the parameters below. * &lt;p> * If the fuel calculations have a red background on any of them, then that means you need to pit and you cannot add enough to finish. * If the fuel calculations have a yellow background, then that still means you need to pit, but you can add enough fuel to finish. * If the fuel calculations all have a green background, then you are good to go to the end of the race on fuel that's in the tank. * &lt;p> * If the SIM supports it, this widget can send commands to the SIM to tell it what fuel level you want added on the next pit stop. * By default, it does not send the commands.  * &lt;p> * Example: * &lt;p>&lt;b> * &lt;sra-fuel-tank data-sra-args-laps-to-average=0 data-sra-args-alt-laps-to-average=2&gt;&lt;/sra-fuel-tank&gt;&lt;br /> * &lt;/b> * &lt;img src="../widgets/FuelTank/icon.png" /> * @ngdoc directive * @name sra-fuel-tank * @param {integer} data-sra-args-laps-to-average The number of laps to average all fuel calculations. Defaults to zero(0). * @param {integer} data-sra-args-alt-laps-to-average The number of laps to average for the alternate fuel calculations. Default zero(2). * @param {boolean} data-sra-args-show-alt-laps-to-average Hides the the Alternate Laps column. Default (false). * @param {boolean} data-sra-args-s-i-m-controller If true, then this widget can send changes to the SIM. Defaults to false. * @param {boolean} data-sra-args-show-table If true, then the table of values will be shown. Default (true). * @param {boolean} data-sra-args-show-to-go-laps If true, then the Laps To Go value will be shown. Default (true). * @param {boolean} data-sra-args-show-in-tank-laps If true, then the Laps remaining in the tank will be shown. Default (true). * @param {boolean} data-sra-args-show-per-tank-laps If true, then the number of laps for a full tank will be shown. Default (true). * @param {boolean} data-sra-args-show-to-finish If true, then the amount of fuel needed to finish is shown. Default (true). * @param {boolean} data-sra-args-show-in-tank If true, then the amount of fuel in the tank is shown. Default (true). * @param {boolean} data-sra-args-show-needed If true, then the amount of fuel you need to add to be able to finish is shown. Default (true).    * @param {boolean} data-sra-args-show-adding If true, then the actual amount of fuel you can add based on what you have asked the SIM to add will be shown. Default (true). * @param {boolean} data-sra-args-show-pit-stops If true, then the number of stops to finish is shown. Default (true). * @param {integer} data-sra-args-interval The interval, in milliseconds, that this widget will update from the server. Default is 100. * @author Jeffrey Gilliam * @since 1.0 * @copyright Copyright (C) 2015 - 2024 Jeffrey Gilliam * @license Apache License 2.0 */define(['SIMRacingApps','css!widgets/FuelTank/FuelTank'],function(SIMRacingApps) {    var self = {        name:            "sraFuelTank",        url:             'FuelTank',        template:        'FuelTank.html',        defaultWidth:    360,        defaultHeight:   480,        defaultInterval: 100   //initialize with the default interval    };    self.module = angular.module('SIMRacingApps'); //get the main module    self.module.directive(self.name,           ['sraDispatcher', '$filter', '$rootScope',    function(sraDispatcher,   $filter,   $rootScope) {        return {            restrict:    'EA',            scope:       true,            templateUrl: sraDispatcher.getWidgetUrl(self.url) + '/' + self.template,            controller: [ '$scope', function($scope) {                $scope.directiveName   = self.name;                $scope.defaultWidth    = self.defaultWidth;                $scope.defaultHeight   = self.defaultHeight;                $scope.defaultInterval = self.defaultInterval;                $scope.translations    = {};                //load translations, if you have any un-comment this                sraDispatcher.loadTranslations(sraDispatcher.getWidgetUrl(self.url),'text',function(path) {                   $scope.translations = sraDispatcher.getTranslation(path);                });                $scope.controller           = false;                $scope.showTable            = true;                $scope.lapsToAverage        = 0; //default to worst lap                $scope.altLapsToAverage     = 2; //when saving, use last to laps                $scope.showAltLapsToAverage = true;                $scope.showToGoLaps         = true;                $scope.showInTankLaps       = true;                $scope.showPerTankLaps      = true;                $scope.showToFinish         = true;                $scope.showInTank           = true;                $scope.showNeeded           = true;                $scope.showAdding           = true;                $scope.showPitStops         = true;                $scope.lapsInTank           = 0;                $scope.altLapsInTank        = 0;                $scope.lapsToGo             = 0;                $scope.lapsToGoUOM          = "lap";                $scope.classIsEnough        = "SIMRacingApps-Widget-FuelTank-enoughToFinish"; //enoughToFinish, enoughAddedToFinish, notEnoughToFinish                $scope.classIsEnoughAdding  = "SIMRacingApps-Widget-FuelTank-enoughToFinish-adding"; //enoughToFinish-adding, enoughAddedToFinish-adding, notEnoughToFinish-adding                $scope.classIsAltEnough     = "SIMRacingApps-Widget-FuelTank-enoughToFinish"; //enoughToFinish, enoughAddedToFinish, notEnoughToFinish                $scope.classIsAltEnoughAdding="SIMRacingApps-Widget-FuelTank-enoughToFinish-adding"; //enoughToFinish-adding, enoughAddedToFinish-adding, notEnoughToFinish-adding                $scope.fuelLevelToFinish    = 0.0;                $scope.altFuelLevelToFinish = 0.0;                $scope.fuelLevelPercentage          = 0;                $scope.fuelLevelNextPercentage      = 0;                $scope.fuelLevelNeededPercentage    = 0;                $scope.fuelLevelToFinishPercentage  = 0;                $scope.update = function() {                    var fuelLevel   = $scope.data.Car.REFERENCE.Gauge.FuelLevel.ValueCurrent.Value;                    var perLap      = $scope.data.Car.REFERENCE.FuelLevelPerLap[$scope.lapsToAverage].Value;                    var altPerLap   = $scope.data.Car.REFERENCE.FuelLevelPerLap[$scope.altLapsToAverage].Value;                    var percentage  = $scope.data.Car.REFERENCE.Lap.COMPLETEDPERCENT.Value / 100.0;                    var adding      = $scope.data.Car.REFERENCE.Gauge.FuelLevel.ValueNext.Value;                    var fuelChecked = $scope.data.Car.REFERENCE.Gauge.FuelLevel.ChangeFlag.Value;                    //unless we've completed one lap, don't use the percentage                    //Eliminates the weird numbers you get at the start of the race.                    if (percentage &lt; 0.0 || $scope.data.Car.REFERENCE.Lap.COMPLETED.Value &lt;= 0)                        percentage = 0.0;                    $scope.fuelLevelAdding              = fuelChecked ? Math.min(adding, $scope.data.Car.REFERENCE.Gauge.FuelLevel.CapacityMaximum.Value - fuelLevel): 0.0;                    $scope.fuelLevelPercentage          = (fuelLevel / $scope.data.Car.REFERENCE.Gauge.FuelLevel.CapacityMaximum.Value) * 100.0;                    $scope.fuelLapsRemaining            = $scope.data.Car.REFERENCE.FuelLaps[$scope.lapsToAverage].Value;                    $scope.altFuelLapsRemaining         = $scope.data.Car.REFERENCE.FuelLaps[$scope.altLapsToAverage].Value;                    $scope.lapsToGo                     = $scope.data.Car.REFERENCE.LapsToGo.Value - percentage;                    $scope.lapsToGoUOM                  = $scope.data.Car.REFERENCE.LapsToGo.UOM;                    $scope.lapsInTank                   = $scope.fuelLapsRemaining;                    $scope.altLapsInTank                = $scope.altFuelLapsRemaining;                    $scope.lapsPerTank                  = $scope.data.Car.REFERENCE.Gauge.FuelLevel.CapacityMaximum.Value / perLap;                    $scope.altLapsPerTank               = $scope.data.Car.REFERENCE.Gauge.FuelLevel.CapacityMaximum.Value / altPerLap;                    $scope.fuelLevelNeeded              = $scope.data.Car.REFERENCE.FuelLevelNeeded[$scope.lapsToAverage].Value;                      $scope.altFuelLevelNeeded           = $scope.data.Car.REFERENCE.FuelLevelNeeded[$scope.altLapsToAverage].Value;                      $scope.fuelLevelToFinish            = $scope.data.Car.REFERENCE.FuelLevelToFinish[$scope.lapsToAverage].Value;                    $scope.altFuelLevelToFinish         = $scope.data.Car.REFERENCE.FuelLevelToFinish[$scope.altLapsToAverage].Value;                    $scope.fuelLevelNeededPercentage    = ($scope.fuelLevelNeeded / $scope.data.Car.REFERENCE.Gauge.FuelLevel.CapacityMaximum.Value) * 100.0;                    $scope.fuelLevelToFinishPercentage  = ($scope.fuelLevelToFinish / $scope.data.Car.REFERENCE.Gauge.FuelLevel.CapacityMaximum.Value) * 100.0;                    if (fuelChecked) {                        $scope.fuelLevelNextPercentage = ($scope.fuelLevelAdding / $scope.data.Car.REFERENCE.Gauge.FuelLevel.CapacityMaximum.Value) * 100.0;                    }                    else {                        $scope.fuelLevelNextPercentage = 0.0;                    }                    if ($scope.fuelLevelAdding > 0.0) {                        if ($scope.fuelLevelNeeded &lt;= 0.0 ) {                            $scope.classIsEnough       = "SIMRacingApps-Widget-FuelTank-enoughToFinish"; //enoughToFinish, enoughAddedToFinish, notEnoughToFinish                            $scope.classIsEnoughAdding = "SIMRacingApps-Widget-FuelTank-enoughToFinish-adding"; //enoughToFinish-adding, enoughAddedToFinish-adding, notEnoughToFinish-adding                        }                        else                        if ($scope.fuelLevelAdding >= $scope.fuelLevelNeeded) {                            $scope.classIsEnough       = "SIMRacingApps-Widget-FuelTank-enoughAddedToFinish"; //enoughToFinish, enoughAddedToFinish, notEnoughToFinish                            $scope.classIsEnoughAdding = "SIMRacingApps-Widget-FuelTank-enoughAddedToFinish-adding"; //enoughToFinish-adding, enoughAddedToFinish-adding, notEnoughToFinish-adding                        }                        else {                            $scope.classIsEnough       = "SIMRacingApps-Widget-FuelTank-notEnoughToFinish"; //enoughToFinish, enoughAddedToFinish, notEnoughToFinish                            $scope.classIsEnoughAdding = "SIMRacingApps-Widget-FuelTank-notEnoughToFinish-adding"; //enoughToFinish-adding, enoughAddedToFinish-adding, notEnoughToFinish-adding                        }                        if ($scope.altFuelLevelNeeded &lt;= 0.0 ) {                            $scope.classIsAltEnough       = "SIMRacingApps-Widget-FuelTank-enoughToFinish"; //enoughToFinish, enoughAddedToFinish, notEnoughToFinish                            $scope.classIsAltEnoughAdding = "SIMRacingApps-Widget-FuelTank-enoughToFinish-adding"; //enoughToFinish-adding, enoughAddedToFinish-adding, notEnoughToFinish-adding                        }                        else                        if ($scope.fuelLevelAdding >= $scope.altFuelLevelNeeded) {                            $scope.classIsAltEnough       = "SIMRacingApps-Widget-FuelTank-enoughAddedToFinish"; //enoughToFinish, enoughAddedToFinish, notEnoughToFinish                            $scope.classIsAltEnoughAdding = "SIMRacingApps-Widget-FuelTank-enoughAddedToFinish-adding"; //enoughToFinish-adding, enoughAddedToFinish-adding, notEnoughToFinish-adding                        }                        else {                            $scope.classIsAltEnough       = "SIMRacingApps-Widget-FuelTank-notEnoughToFinish"; //enoughToFinish, enoughAddedToFinish, notEnoughToFinish                            $scope.classIsAltEnoughAdding = "SIMRacingApps-Widget-FuelTank-notEnoughToFinish-adding"; //enoughToFinish-adding, enoughAddedToFinish-adding, notEnoughToFinish-adding                        }                    }                    else {                        if ($scope.fuelLevelNeeded &lt;= 0.0 ) {                            $scope.classIsEnough       = "SIMRacingApps-Widget-FuelTank-enoughToFinish"; //enoughToFinish, enoughAddedToFinish, notEnoughToFinish                            $scope.classIsEnoughAdding = "SIMRacingApps-Widget-FuelTank-enoughToFinish-adding"; //enoughToFinish-adding, enoughAddedToFinish-adding, notEnoughToFinish-adding                        }                        else {                            $scope.classIsEnough       = "SIMRacingApps-Widget-FuelTank-notEnoughToFinish"; //enoughToFinish, enoughAddedToFinish, notEnoughToFinish                            $scope.classIsEnoughAdding = "SIMRacingApps-Widget-FuelTank-notEnoughToFinish-adding"; //enoughToFinish-adding, enoughAddedToFinish-adding, notEnoughToFinish-adding                        }                        if ($scope.altFuelLevelNeeded &lt;= 0.0 ) {                            $scope.classIsAltEnough       = "SIMRacingApps-Widget-FuelTank-enoughToFinish"; //enoughToFinish, enoughAddedToFinish, notEnoughToFinish                            $scope.classIsAltEnoughAdding = "SIMRacingApps-Widget-FuelTank-enoughToFinish-adding"; //enoughToFinish-adding, enoughAddedToFinish-adding, notEnoughToFinish-adding                        }                        else {                            $scope.classIsAltEnough       = "SIMRacingApps-Widget-FuelTank-notEnoughToFinish"; //enoughToFinish, enoughAddedToFinish, notEnoughToFinish                            $scope.classIsAltEnoughAdding = "SIMRacingApps-Widget-FuelTank-notEnoughToFinish-adding"; //enoughToFinish-adding, enoughAddedToFinish-adding, notEnoughToFinish-adding                        }                    }                    if ($scope.lapsToGo &lt; 0.0)                        $scope.lapsToGo = 0.0;                    if ($scope.lapsInTank &lt; 0.0)                        $scope.lapsInTank = 0.0;                    if ($scope.altLapsInTank &lt; 0.0)                        $scope.altLapsInTank = 0.0;               };            }]            , link: function($scope,$element,$attrs) {                //copy arguments to our scope. First if using attribute, second tag, else default to something.                $attrs.sraArgsData = $attrs.sraArgsData || "";                $scope.value =                 $scope[self.name] = sraDispatcher.getTruthy($scope.sraArgsVALUE, $attrs[self.name], $attrs.sraArgsValue, "DefaultValue");                /** your code goes here **/                $scope.canControl           = sraDispatcher.getBoolean($scope.sraArgsPITCOMMANDSSIMCONTROLLER, $attrs.sraArgsSIMController, $attrs.sraSIMController, "false");                $scope.lapsToAverage        = sraDispatcher.getTruthy( $scope.sraArgsLAPSTOAVERAGE, $attrs.sraArgsLapsToAverage, $scope.lapsToAverage);                $scope.altLapsToAverage     = sraDispatcher.getTruthy( $scope.sraArgsALTLAPSTOAVERAGE, $attrs.sraArgsAltLapsToAverage, $scope.altLapsToAverage);                $scope.showTable            = sraDispatcher.getBoolean($scope.sraArgsSHOWTABLE, $attrs.sraArgsShowTable, $scope.showTable);                $scope.showAltLapsToAverage = sraDispatcher.getBoolean($scope.sraArgsSHOWALTLAPSTOAVERAGE, $attrs.sraArgsShowAltLapsToAverage, $scope.showAltLapsToAverage);                $scope.showToGoLaps         = sraDispatcher.getBoolean($scope.sraArgsSHOWTOGOLAPS,$attrs.sraArgsShowToGoLaps,$scope.showToGoLaps);                $scope.showInTankLaps       = sraDispatcher.getBoolean($scope.sraArgsSHOWINTANKLAPS,$attrs.sraArgsShowInTankLaps,$scope.showInTankLaps);                $scope.showPerTankLaps      = sraDispatcher.getBoolean($scope.sraArgsSHOWPERTANKLAPS,$attrs.sraArgsShowPerTankLaps,$scope.showPerTankLaps);                $scope.showToFinish         = sraDispatcher.getBoolean($scope.sraArgsSHOWTOFINISH,$attrs.sraArgsShowToFinish,$scope.showToFinish);                $scope.showInTank           = sraDispatcher.getBoolean($scope.sraArgsSHOWINTANK,$attrs.sraArgsShowInTank,$scope.showInTank);                $scope.showNeeded           = sraDispatcher.getBoolean($scope.sraArgsSHOWNEEDED,$attrs.sraArgsShowNeeded,$scope.showNeeded);                $scope.showAdding           = sraDispatcher.getBoolean($scope.sraArgsSHOWADDING,$attrs.sraArgsShowAdding,$scope.showAdding);                $scope.showPitStops         = sraDispatcher.getBoolean($scope.sraArgsSHOWPITSTOPS,$attrs.sraArgsShowPitStops,$scope.showPitStops);                if ($scope.canControl)                    $attrs.sraArgsData += ";Car/REFERENCE/HasAutomaticPitCommands";                $attrs.sraArgsData += ";Car/REFERENCE/Gauge/FuelLevel/ValueCurrent";                $attrs.sraArgsData += ";Car/REFERENCE/Gauge/FuelLevel/CapacityMaximum";                $attrs.sraArgsData += ";Car/REFERENCE/FuelLevelPerLap/"+$scope.lapsToAverage;                $attrs.sraArgsData += ";Car/REFERENCE/FuelLevelPerLap/"+$scope.altLapsToAverage;                $attrs.sraArgsData += ";Car/REFERENCE/PitStopsRemaining/"+$scope.lapsToAverage;                $attrs.sraArgsData += ";Car/REFERENCE/PitStopsRemaining/"+$scope.altLapsToAverage;                $attrs.sraArgsData += ";Car/REFERENCE/LapsToGo";                $attrs.sraArgsData += ";Car/REFERENCE/FuelLaps/"+$scope.lapsToAverage;                $attrs.sraArgsData += ";Car/REFERENCE/FuelLaps/"+$scope.altLapsToAverage;                $attrs.sraArgsData += ";Car/REFERENCE/FuelLapsMaximum/"+$scope.lapsToAverage;                $attrs.sraArgsData += ";Car/REFERENCE/Gauge/FuelLevel/ValueNext";                $attrs.sraArgsData += ";Car/REFERENCE/FuelLevelToFinish/"+$scope.lapsToAverage;                $attrs.sraArgsData += ";Car/REFERENCE/FuelLevelToFinish/"+$scope.altLapsToAverage;                $attrs.sraArgsData += ";Car/REFERENCE/FuelLevelNeeded/"+$scope.lapsToAverage;                $attrs.sraArgsData += ";Car/REFERENCE/FuelLevelNeeded/"+$scope.altLapsToAverage;                $attrs.sraArgsData += ";Car/REFERENCE/Lap/COMPLETEDPERCENT";                $attrs.sraArgsData += ";Car/REFERENCE/Lap/COMPLETED";                $attrs.sraArgsData += ";Car/REFERENCE/Gauge/FuelLevel/CapacityIncrement";                $attrs.sraArgsData += ";Car/REFERENCE/Gauge/FuelLevel/ChangeFlag";                $attrs.sraArgsData += ";Car/REFERENCE/Status";                var elements = $element.find("div");                var tank = null;                for (var i=0; i &lt; elements.length;i++) {                    var element = angular.element(elements[i]);                    if (element.hasClass("SIMRacingApps-Widget-FuelTank-tank"))                        tank = element;                }                sraDispatcher.onClick($scope,tank,function(event) {                    if (!$scope.controller)                        return;                    var pct = ((event.offsetHeight - event.offsetY) / event.offsetHeight) * 100.0;                    var fuelLevelToAdd = $scope.data.Car.REFERENCE.Gauge.FuelLevel.ValueNext.Value;                    //if they clicked in the fuel area, toggle between full,none                    if (pct &lt;= $scope.fuelLevelPercentage) {                        if ($scope.data.Car.REFERENCE.Gauge.FuelLevel.ChangeFlag.Value)                            fuelLevelToAdd = 0;                        else                            fuelLevelToAdd = $scope.data.Car.REFERENCE.Gauge.FuelLevel.CapacityMaximum.Value;                    }                    else                    //if clicked in the needed area, toogle between needed and none                    if (pct &lt;= ($scope.fuelLevelPercentage + $scope.fuelLevelNeededPercentage)) {                        if ($scope.data.Car.REFERENCE.Gauge.FuelLevel.ChangeFlag.Value)                            fuelLevelToAdd = 0;                        else                            fuelLevelToAdd  = $scope.data.Car.REFERENCE.Gauge.FuelLevel.CapacityMaximum.Value                                            * ($scope.fuelLevelNeededPercentage / 100.0);                    }                    else {                        //use the pct to calculate how much fuel to add that's above what you have                        fuelLevelToAdd  = $scope.data.Car.REFERENCE.Gauge.FuelLevel.CapacityMaximum.Value                                        * ((pct - $scope.fuelLevelPercentage) / 100.0);                    }                    if (fuelLevelToAdd == 0)                        sraDispatcher.sendCommand("Car/REFERENCE/Gauge/FuelLevel/setValueNext/0;Car/REFERENCE/Gauge/FuelLevel/setChangeFlag/false");                    else                         sraDispatcher.sendCommand("Car/REFERENCE/Gauge/FuelLevel/setValueNext/"+fuelLevelToAdd+";Car/REFERENCE/Gauge/FuelLevel/setChangeFlag/true");                });                /**standard code that should be in every directive **/                $rootScope.$on('sraResize', sraDispatcher.resize($scope,$element,self.defaultWidth,self.defaultHeight));                //register with the dispatcher                $scope.names = sraDispatcher.subscribe($scope,$attrs,self.defaultInterval); //register subscriptions and options to the dispatcher                /**watches go here **/                $scope.$watch("data.Car.REFERENCE.HasAutomaticPitCommands.Value", function(value) {                    if (!value)                        $scope.controller = false;                    else                    if (value && $scope.canControl)                        $scope.controller = true;                });                $scope.$watch("data.Car.REFERENCE.Gauge.FuelLevel.ValueCurrent.Value",function(value) {                    $scope.update();                });                $scope.$watch("data.Car.REFERENCE.Gauge.FuelLevel.ValueNext.Value",function(value) {                    $scope.update();                });                $scope.$watch("data.Car.REFERENCE.Gauge.FuelLevel.ChangeFlag.Value",function(value) {                    if (value) {                        $scope.fuelLevelNextPercentage = ($scope.data.Car.REFERENCE.Gauge.FuelLevel.ValueNext.Value / $scope.data.Car.REFERENCE.Gauge.FuelLevel.CapacityMaximum.Value) * 100.0;//$scope.fuelLevelNextPercentage=25;                    }                    else                        $scope.fuelLevelNextPercentage = 0.0;                    $scope.update();                });                $scope.$watch("data.Car.REFERENCE.Lap.COMPLETEDPERCENT.Value",function(value) {                    $scope.update();                });                $scope.$watch("data.Car.REFERENCE.LapsToGo.Value",function(value) {                    $scope.update();                });                $scope.$watch("data.Car.REFERENCE.FuelLaps['"+$scope.lapsToAverage+"'].Value",function(value) {                    $scope.update();                });                $scope.$watch("data.Car.REFERENCE.FuelLaps['"+$scope.altLapsToAverage+"'].Value",function(value) {                    $scope.update();                });                $scope.$watch("data.Car.REFERENCE.FuelLevelNeeded['"+$scope.lapsToAverage+"'].Value",function(value) {                    $scope.update();                });                $scope.$watch("data.Car.REFERENCE.FuelLevelToFinish['"+$scope.lapsToAverage+"'].Value",function(value) {                    $scope.update();                });            }        };    }]);    return self;});</code></pre>
        </article>
        <!-- index.html -->
        <!-- class files -->
      </div>
      <footer style="clear:both">
        Documentation generated by
        <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.3.2</a>
        using
        <a href="https://github.com/allenhwkim/angular-jsdoc">Angular-JSDoc template</a>
      </footer>
    </div>
    <!--%= prettyJson %-->
    <script>
      prettyPrint();
      var lineNo = window.location.hash.match(/#line([0-9]+)$/);
      lineNo && document.querySelector("ol li:nth-child("+(lineNo[1])+")").scrollIntoView();
    </script>
  </body>
</html>