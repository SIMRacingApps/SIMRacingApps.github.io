<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: apps/RaceAdministrator/default.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: apps/RaceAdministrator/default.js</h1>

    


    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>'use strict';

/**
 * The Race Administrator App is designed to make managing a race easier.
 * &lt;p>
 * There are session commands that get issued as soon as you click them.
 * These commands are Advance Session, All Chat On, All Chat Off, Caution.
 * &lt;p>
 * There are driver commands where you have to click the command to issue first,
 * (it will turn green), and then click each driver to apply the command to.
 * The driver command will stay active until you change it, except for the Remove command.
 * &lt;p>
 * The last 5 commands sent will be shown at the bottom left of the screen.
 * 
 * &lt;img src="../apps/RaceAdministrator/icon.png" />
 * 
 * NOTE: All parameters are specified in the URL.
 * @ngdoc apps
 * @name RaceAdministrator
 * @param {boolean} showFPS When any value is seen in the URL for this attribute, the Frames Per Second(FPS) will be shown. Defaults to not show.
 * @author Jeffrey Gilliam
 * @since 1.0
 * @copyright Copyright (C) 2015 Jeffrey Gilliam
 * @license Apache License 2.0
 */
require(SIMRacingAppsRequireConfig,
        ['angular'
        ,'SIMRacingApps'
        ,'css!default'
        ,'widgets/CarSelector/CarSelector'
        ],
function( angular,  SIMRacingApps) {
    angular.element(document).ready(function() {

        //create any angular filters, values, constants, directives here on the SIMRacingApps.module

        //your application controller is added as a controller on the SIMRacingApps module
        SIMRacingApps.module.controller("SIMRacingApps-Controller",
               ['$scope','sraDispatcher','$timeout',
        function($scope,  sraDispatcher, $timeout) {
                   
            sraDispatcher.loadTranslations("/SIMRacingApps/apps/RaceAdministrator","text",function(path) {
                $scope.translations = sraDispatcher.getTranslation(path,"auto");
            });
            
            $scope.clickDelay = 2000;
            $scope.activeDriverButton     = "";
            $scope.currentCarCommand      = "";
            $scope.sentCommands           = [0,1,2,3,4];
            $scope.sentCommandsText       = ['&amp;nbsp;','&amp;nbsp;','&amp;nbsp;','&amp;nbsp;','&amp;nbsp;'];
            
            $scope.sendCommand = function(command) {
                sraDispatcher.sendCommand(command);
                $scope.sentCommandsText[0] = $scope.sentCommandsText[1];
                $scope.sentCommandsText[1] = $scope.sentCommandsText[2];
                $scope.sentCommandsText[2] = $scope.sentCommandsText[3];
                $scope.sentCommandsText[3] = $scope.sentCommandsText[4];
                $scope.sentCommandsText[4] = command;
                console.log(command);
            };
           
            $scope.cautionClicked = function($clickedScope) {
                $clickedScope.setClickedState('clicked');
                $scope.sendCommand("Session/setCautionFlag");
                
                //delay a little, then clear the clicked state.
                $timeout(function () {
                    $clickedScope.setClickedState('none');
                }, $scope.clickDelay);
            };
            
            $scope.chatOnClicked = function($clickedScope) {
                console.log("Chat On Clicked");
                $clickedScope.setClickedState('clicked');
                $scope.sendCommand("Session/setChatFlag/Y");
                
                //delay a little, then clear the clicked state.
                $timeout(function () {
                    $clickedScope.setClickedState('none');
                }, $scope.clickDelay);
            };

            $scope.chatOffClicked = function($clickedScope) {
                console.log("Chat Off Clicked");
                $clickedScope.setClickedState('clicked');
                $scope.sendCommand("Session/setChatFlag/N");
                
                //delay a little, then clear the clicked state.
                $timeout(function () {
                    $clickedScope.setClickedState('none');
                }, $scope.clickDelay);
            };
            
            $scope.advanceClicked = function($clickedScope) {
                console.log("Advance Clicked");
                $clickedScope.setClickedState('clicked');
                $scope.sendCommand("Session/setAdvanceFlag");
                
                //delay a little, then clear the clicked state.
                $timeout(function () {
                    $clickedScope.setClickedState('none');
                }, $scope.clickDelay);
            };

            $scope.DRIVERADMINON_Clicked = function($clickedScope) {
                $scope.activeDriverButton = "DRIVERADMINON";
                $scope.currentCarCommand  = "setAdminFlag/Y";
                console.log($scope.activeDriverButton+"_Clicked");
            };
            
            $scope.DRIVERADMINOFF_Clicked = function($clickedScope) {
                $scope.activeDriverButton = "DRIVERADMINOFF";
                $scope.currentCarCommand  = "setAdminFlag/N";
                console.log($scope.activeDriverButton+"_Clicked");
            };
            
            $scope.DRIVERCHATON_Clicked = function($clickedScope) {
                $scope.activeDriverButton = "DRIVERCHATON";
                $scope.currentCarCommand  = "setChatFlag/Y";
                console.log($scope.activeDriverButton+"_Clicked");
            };

            $scope.DRIVERCHATOFF_Clicked = function($clickedScope) {
                $scope.activeDriverButton = "DRIVERCHATOFF";
                $scope.currentCarCommand  = "setChatFlag/N";
                console.log($scope.activeDriverButton+"_Clicked");
            };

            $scope.DRIVERREMOVE_Clicked = function($clickedScope) {
                $scope.activeDriverButton = "DRIVERREMOVE";
                $scope.currentCarCommand  = "setRemoveFlag";
                console.log($scope.activeDriverButton+"_Clicked");
            };
            
            $scope.DRIVERWAVEAROUND_Clicked = function($clickedScope) {
                $scope.activeDriverButton = "DRIVERWAVEAROUND";
                $scope.currentCarCommand  = "setWaveAroundFlag";
                console.log($scope.activeDriverButton+"_Clicked");
            };
            
            $scope.DRIVERBLACK0_Clicked = function($clickedScope) {
                $scope.activeDriverButton = "DRIVERBLACK0";
                $scope.currentCarCommand  = "setBlackFlag/0";
                console.log($scope.activeDriverButton+"_Clicked");
            };
            
            $scope.DRIVERBLACK15_Clicked = function($clickedScope) {
                $scope.activeDriverButton = "DRIVERBLACK15";
                $scope.currentCarCommand  = "setBlackFlag/15";
                console.log($scope.activeDriverButton+"_Clicked");
            };
            
            $scope.DRIVERBLACKLAP_Clicked = function($clickedScope) {
                $scope.activeDriverButton = "DRIVERBLACKLAP";
                $scope.currentCarCommand  = "setBlackFlag/1/lap";
                console.log($scope.activeDriverButton+"_Clicked");
            };
            
            $scope.DRIVERDQ_Clicked = function($clickedScope) {
                $scope.activeDriverButton = "DRIVERDQ";
                $scope.currentCarCommand  = "setDisqualifyFlag";
                console.log($scope.activeDriverButton+"_Clicked");
            };
            
            $scope.DRIVEREOL_Clicked = function($clickedScope) {
                $scope.activeDriverButton = "DRIVEREOL";
                $scope.currentCarCommand  = "setEndOfLineFlag";
                console.log($scope.activeDriverButton+"_Clicked");
            };
            
            $scope.DRIVERCLEARALLPENALTIES_Clicked = function($clickedScope) {
                $scope.activeDriverButton = "DRIVERCLEARALLPENALTIES";
                $scope.currentCarCommand  = "setClearPenaltiesFlag";
                console.log($scope.activeDriverButton+"_Clicked");
            };
            
            
            $scope.carClicked = function($clickedScope,car) {
                if ($scope.currentCarCommand &amp;&amp; car) {
                    console.log("RaceAdministrator.carClicked("+car+")");
                    $clickedScope.setClickedState('clicked');
                    $scope.sendCommand("Car/"+car+"/"+$scope.currentCarCommand);
                    
                    //This command is not reversable, so after it has been issued, remove it from the active button state.
                    if ($scope.activeDriverButton == "DRIVERREMOVE") {
                        $scope.activeDriverButton = "";
                        $scope.currentCarCommand  = "";
                    }
                    
                    //delay a little, then clear the clicked state.
                    $timeout(function () {
                        $clickedScope.setClickedState('none');
                    }, $scope.clickDelay);
                }
            };
        }]);

        //now start the process by passing in the element where the SIMRacingsApps class is defined.
        //all elements below that will be owned by SIMRacingApps. This should allow you to put other
        //content outside of this element that is not SIMRacingApps specific. All bundled apps will pass in the body.

        SIMRacingApps.start(angular.element(document.body));

        //once angular is booted, your controller will get called.
        //it is not recommended to have multiple controllers in SIMRacingApps because of how the $scope is transversed from child to parent.
        //You can have as many directives and other angular objects as you wish.
    });
});
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Index</a></h2><h3>Modules</h3><ul><li><a href="module-SIMRacingApps.html">SIMRacingApps</a></li></ul><h3>apps</h3><ul><li><a href="CrewChief.html">CrewChief</a></li><li><a href="CrewChief-Large.html">CrewChief-Large</a></li><li><a href="Dash-BarGauges-DigitalOverlay.html">Dash-BarGauges-DigitalOverlay</a></li><li><a href="Dash-Gauges-Spek.html">Dash-Gauges-Spek</a></li><li><a href="Dash-StockCars-DigitalOverlay.html">Dash-StockCars-DigitalOverlay</a></li><li><a href="RaceAdministrator.html">RaceAdministrator</a></li><li><a href="Spectator.html">Spectator</a></li></ul><h3>filter</h3><ul><li><a href="module-SIMRacingApps.sraCeil.html">sraCeil</a></li><li><a href="module-SIMRacingApps.sraDebug.html">sraDebug</a></li><li><a href="module-SIMRacingApps.sraDecodeEntities.html">sraDecodeEntities</a></li><li><a href="module-SIMRacingApps.sraDuration.html">sraDuration</a></li><li><a href="module-SIMRacingApps.sraFloor.html">sraFloor</a></li><li><a href="module-SIMRacingApps.sraHex.html">sraHex</a></li><li><a href="module-SIMRacingApps.sraLPad.html">sraLPad</a></li><li><a href="module-SIMRacingApps.sraNumber.html">sraNumber</a></li><li><a href="module-SIMRacingApps.sraRound.html">sraRound</a></li><li><a href="module-SIMRacingApps.sraRPad.html">sraRPad</a></li></ul><h3>directive</h3><ul><li><a href="module-SIMRacingApps-sra-data.html">sra-data</a></li><li><a href="module-SIMRacingApps-sra-horizontal-align.html">sra-horizontal-align</a></li><li><a href="module-SIMRacingApps-sra-resize.html">sra-resize</a></li><li><a href="module-SIMRacingApps-sra-vertical-align.html">sra-vertical-align</a></li><li><a href="sra-analog-gauge.html">sra-analog-gauge</a></li><li><a href="sra-analog-gauge-spek-brake-pressure.html">sra-analog-gauge-spek-brake-pressure</a></li><li><a href="sra-analog-gauge-spek-fuel-level.html">sra-analog-gauge-spek-fuel-level</a></li><li><a href="sra-analog-gauge-spek-fuel-pressure.html">sra-analog-gauge-spek-fuel-pressure</a></li><li><a href="sra-analog-gauge-spek-oil-level.html">sra-analog-gauge-spek-oil-level</a></li><li><a href="sra-analog-gauge-spek-oil-pressure.html">sra-analog-gauge-spek-oil-pressure</a></li><li><a href="sra-analog-gauge-spek-oil-temp.html">sra-analog-gauge-spek-oil-temp</a></li><li><a href="sra-analog-gauge-spek-tachometer.html">sra-analog-gauge-spek-tachometer</a></li><li><a href="sra-analog-gauge-spek-voltage.html">sra-analog-gauge-spek-voltage</a></li><li><a href="sra-analog-gauge-spek-water-level.html">sra-analog-gauge-spek-water-level</a></li><li><a href="sra-analog-gauge-spek-water-pressure.html">sra-analog-gauge-spek-water-pressure</a></li><li><a href="sra-analog-gauge-spek-water-temp.html">sra-analog-gauge-spek-water-temp</a></li><li><a href="sra-bar-gauge.html">sra-bar-gauge</a></li><li><a href="sra-bar-gauge-brake-pressure.html">sra-bar-gauge-brake-pressure</a></li><li><a href="sra-bar-gauge-fuel-level.html">sra-bar-gauge-fuel-level</a></li><li><a href="sra-bar-gauge-fuel-pressure.html">sra-bar-gauge-fuel-pressure</a></li><li><a href="sra-bar-gauge-oil-level.html">sra-bar-gauge-oil-level</a></li><li><a href="sra-bar-gauge-oil-pressure.html">sra-bar-gauge-oil-pressure</a></li><li><a href="sra-bar-gauge-oil-temp.html">sra-bar-gauge-oil-temp</a></li><li><a href="sra-bar-gauge-tachometer.html">sra-bar-gauge-tachometer</a></li><li><a href="sra-bar-gauge-voltage.html">sra-bar-gauge-voltage</a></li><li><a href="sra-bar-gauge-water-level.html">sra-bar-gauge-water-level</a></li><li><a href="sra-bar-gauge-water-pressure.html">sra-bar-gauge-water-pressure</a></li><li><a href="sra-bar-gauge-water-temp.html">sra-bar-gauge-water-temp</a></li><li><a href="sra-car-controls.html">sra-car-controls</a></li><li><a href="sra-car-image.html">sra-car-image</a></li><li><a href="sra-car-number.html">sra-car-number</a></li><li><a href="sra-car-number-extended.html">sra-car-number-extended</a></li><li><a href="sra-car-selector.html">sra-car-selector</a></li><li><a href="sra-data-table.html">sra-data-table</a></li><li><a href="sra-driver-info.html">sra-driver-info</a></li><li><a href="sra-flags.html">sra-flags</a></li><li><a href="sra-fuel-tank.html">sra-fuel-tank</a></li><li><a href="sra-gear.html">sra-gear</a></li><li><a href="sra-lap-timing.html">sra-lap-timing</a></li><li><a href="sra-pedals.html">sra-pedals</a></li><li><a href="sra-pit-commander.html">sra-pit-commander</a></li><li><a href="sra-pit-road.html">sra-pit-road</a></li><li><a href="sra-radio-control.html">sra-radio-control</a></li><li><a href="sra-relative.html">sra-relative</a></li><li><a href="sra-shift-light.html">sra-shift-light</a></li><li><a href="sra-shift-lights.html">sra-shift-lights</a></li><li><a href="sra-standings.html">sra-standings</a></li><li><a href="sra-standings-top-10.html">sra-standings-top-10</a></li><li><a href="sra-standings-top-20.html">sra-standings-top-20</a></li><li><a href="sra-standings-top-35.html">sra-standings-top-35</a></li><li><a href="sra-steering-wheel.html">sra-steering-wheel</a></li><li><a href="sra-team-speak-talking.html">sra-team-speak-talking</a></li><li><a href="sra-template.html">sra-template</a></li><li><a href="sra-timing-delta.html">sra-timing-delta</a></li><li><a href="sra-tire.html">sra-tire</a></li><li><a href="sra-tire-measurements.html">sra-tire-measurements</a></li><li><a href="sra-track-map.html">sra-track-map</a></li><li><a href="sra-track-map-car.html">sra-track-map-car</a></li><li><a href="sra-track-map-finish-line.html">sra-track-map-finish-line</a></li><li><a href="sra-weather-info.html">sra-weather-info</a></li><li><a href="sra-wind-gauge.html">sra-wind-gauge</a></li></ul><h3>controller</h3><ul><li><a href="module-SIMRacingApps-sraController.html">sraController</a></li></ul><h3>factory</h3><ul><li><a href="module-SIMRacingApps-sraDispatcher.html">sraDispatcher</a></li></ul><h3>Global</h3><ul><li><a href="global.html#SIMRacingAppsRequireConfig">SIMRacingAppsRequireConfig</a></li></ul>
</nav>

<br clear="both">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.3.2</a> 
    using <a href="https://github.com/allenhwkim/angular-jsdoc">Angular-JSDoc template </a> 
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
<script>
  // scroll to the current document navigation
  var href=window.location.href.match(/\/([^\/]+$)/)[1];
  if (currentNav = document.querySelector("nav a[href='"+href+"']"))
    currentNav.scrollIntoView(true);
  // scroll to the top of the document
  if (window.location.hash == "")
    document.querySelector("body").scrollIntoView(true);
  // adjust the width of main section by navigation width
  // var navWidth = document.querySelector('nav').getBoundingClientRect().width;
  // var mainWidth = document.querySelector('#main').getBoundingClientRect().width;
  // document.querySelector('#main').style.width = (mainWidth - navWidth)+'px';
</script>
</body>
</html>
