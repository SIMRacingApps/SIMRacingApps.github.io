<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc -->
<title>Data</title>
<link rel="stylesheet" type="text/css" href="../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="Data";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":10,"i1":10};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/Data.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../com/SIMRacingApps/servlets/ConsumerTester.html" title="class in com.SIMRacingApps.servlets"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../com/SIMRacingApps/servlets/DataEvent.html" title="class in com.SIMRacingApps.servlets"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?com/SIMRacingApps/servlets/Data.html" target="_top">Frames</a></li>
<li><a href="Data.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">com.SIMRacingApps.servlets</div>
<h2 title="Class Data" class="title">Class Data</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>javax.servlet.GenericServlet</li>
<li>
<ul class="inheritance">
<li>javax.servlet.http.HttpServlet</li>
<li>
<ul class="inheritance">
<li>com.SIMRacingApps.servlets.Data</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Implemented Interfaces:</dt>
<dd>java.io.Serializable, javax.servlet.Servlet, javax.servlet.ServletConfig</dd>
</dl>
<hr>
<br>
<pre>@WebServlet(description="SIMRacingApps Data Access for JSON",
            urlPatterns={"/Data","/Data/*"},
            loadOnStartup=1)
public class <span class="typeNameLabel">Data</span>
extends javax.servlet.http.HttpServlet</pre>
<div class="block">This class implements the "/Data" interface for the HTTP protocol.
 It accepts the POST and GET methods for requesting and receiving data from the SIM.
 <p>
 There are 2 ways to use these methods. 
 One is Subscribe and Publish and the other is ReST(<a href="https://en.wikipedia.org/wiki/Representational_state_transfer" target="_blank">Representational State Transfer</a>).
 <p>
 <b>Subscribe and Publish</b>
 <p>
 This process uses the POST method to subscribe to the data to publish. 
 The GET method is then used to poll the server for the published changes.
 Through other HTTP interfaces, you can also use 
 <a href="../../../com/SIMRacingApps/servlets/DataSocket.html" title="class in com.SIMRacingApps.servlets"><code>Web Socket Polling</code></a>,
 <a href="../../../com/SIMRacingApps/servlets/DataStreaming.html" title="class in com.SIMRacingApps.servlets"><code>Web Socket Streaming</code></a>, 
 and <a href="../../../com/SIMRacingApps/servlets/DataEvent.html" title="class in com.SIMRacingApps.servlets"><code>Web Events</code></a>
 to receive the published changes.
 <p>
 Both POST and GET must have a parameter called "sessionid", in the URL query string, with a value that will be used to identify who the subscriptions below to.
 Depending on the client, you may want to disable caching by adding a counter parameter that is incremented on every call to GET.
 To help out, the response headers are also set to disable caching. For example: http://localhost/SIMRacingApps/Data?sessionid=1234567890.
 I would recommend using a value that will not conflict with other clients using the server at the same time, like time of day down to the millisecond.
 <p>
 The body of the POST method must be formatted as a JSON string according to the following structure. 
 This same structure will be updated with the values and returned to you when you call GET.
 It is important to note, that only changes are returned by GET for performance reasons.
 Changes means, that if any of the "names" associated with an "id" changes, then all of the "names" for that "id" are returned.
 Also, when the Interval has passed, all "names" with a shorter or equal Interval will also be returned so they will all be in sync with the SIM.
 <pre>
 {
   "(id)":  {  "(name)":  { "Name": "(datapath)",  "Format": "(formatstring)",  "UOM": "(requesteduom)",  "Interval": (milliseconds) }
          ,    "(name2)": { "Name": "(datapath2)", "Format": "(formatstring2)", "UOM": "(requesteduom2)", "Interval": (milliseconds) }  //optional
          ,... //followed with as many as you need
        }
  ,"(id2)": {  "(name)":  { "Name": "(datapath)",  "Format": "(formatstring)",  "UOM": "(requesteduom)",  "Interval": (milliseconds) }  //optional
          ,    "(name2)": { "Name": "(datapath2)", "Format": "(formatstring2)", "UOM": "(requesteduom2)", "Interval": (milliseconds) }  //optional
          ,... //followed with as many as you need
        }
  ,...
 }
 </pre>
 <dl>
      <dt>id</dt>             <dd>An identifier to be used as you see fit. It is only used by the server to group names together.</dd>
      <dt>name</dt>           <dd>Also an identifier to be used as you see fit.</dd>
      <dt>datapath</dt>       <dd>A path to the SIM data you are subscribing to. For example: "/Car/REFERENCE/Description".</dd>
      <dt>formatstring</dt>   <dd>A format string using the syntax of <code>Formatter</code>.</dd>
      <dt>requesteduom</dt>   <dd>The unit of measure you would like the result in. Note: If it cannot be converted, the SIM's UOM is returned.</dd>
      <dt>milliseconds</dt>   <dd>How often this particular should check for changes. Slowing these down can help performance.</dd>
 </dl>
 POST also supports the following parameters in the query string:
 <ul>
   <li> startingversion=(startingVersion) - a SIM specific counter of where to start playing the recorded file.</li>
   <li> endingversion=(endingVersion) - A SIM specific counter of where to stop playing the record file.</li>
   <li> play=(filename) - Plays the previously recorded file.</li>
   <li> record=(filename) - Records the current session to a file. Saves the file in SRA_DIR/webapps/SIMRacingApps/recordings.</li>
   <li> stop - stops playing or stops recording.</li>
 </ul>
 The GET method should be called at least as often as the smallest Interval of all the names in the subscribed data structure.
 It returns the changed data in the very same format as you subscribed to with the additional attributes added.
 For details about these attributes, see <a href="../../../com/SIMRacingApps/Data.html" title="class in com.SIMRacingApps"><code>Data</code></a>.
 Also, the call to POST will return this data as well. So, you want to parse the response body for both.
 Failure to call GET within 10 seconds of the last call will assume the client has died and delete the session cache.
 This should not be a problem as most practical applications will need to call GET multiple times per second.
 To recover, the client can call POST again.
 <ul>
      <li>ValueFormatted</li>
      <li>Value</li>
      <li>Type</li>
      <li>UOMAbbr</li>
      <li>UOMDescr</li>
      <li>State</li>
      <li>StatePercent</li>
 </ul> 
 <P>
 <b>ReST</b>
 <p>
 With ReST you do not call POST, because you can only specify one data path in the URL.
 Instead, you call GET with the data path appended to the URL after "/Data". 
 For example: http://localhost/SIMRacingApps/Data/Car/REFERENCE/Description.
 Because of this, ReST does not perform as well as Subscribe/Publish for larger data sets. 
 It also does not guarantee the data will be in sync between the calls to GET for multiple values.
 Therefore, it usefulness is degraded to when Subscribe/Publish is not needed, such as, one time or infrequent calls.
 By default, this returns a JSON string formatted "pretty" because I see it primarily being used from the browser ad-hoc.
 If the data returned refers to a structure, then the ValueFormatted may actually be a JSON string. 
 For example: http://localhost/SIMRacingApps/Data/Car/REFERENCE, will return all the data available for that car in JSON format.
 You can specify the following parameters in the query string to change result returned.
 <ul>
   <li> lang=(lang), to the data be localized to this language instead of the servers default.</li>
   <li> format=(format), a format using <code>Formatter</code> syntax.</li>
   <li> uom=(uom), the unit of measure to return the result in.</li>
   <li> output=(one of the following. See <a href="../../../com/SIMRacingApps/Data.html" title="class in com.SIMRacingApps"><code>Data</code></a> for details).
        <ul>
           <li>ValueFormatted,Formatted - Returns the Value formatted with the "format" string and translated to "lang".</li>
           <li>Value - Returns the raw value.</li>
           <li>State - Returns the state.</li>
           <li>StatePercent - Returns the percentage of the Value of the State that it is in.</li>
           <li>Lang - Returns the language/locale of the request.</li>
           <li>Uom - Returns the raw unit of measure code.</li>
           <li>UOMAbbr - Returns the short name of the UOM.</li>
           <li>UOMDescr - Returns the long name of the UOM, pluralized.</li>
           <li>JSON - Returns the entire Data object as a JSON string.</li>
           <li>Pretty - The default. Returns the entire Data object as a JSON string, but formatted for readability.</li>
        </ul> 
 </ul>
 <p>
 <b>What data paths are available?</b>
 <p>
 The paths that are available is determined by searching the following classes for methods that returns a "<a href="../../../com/SIMRacingApps/Data.html" title="class in com.SIMRacingApps"><code>Data</code></a>" object
 and either takes no arguments or all of the arguments are strings. See each class for available paths. 
 <ul>
      <li><a href="../../../com/SIMRacingApps/SIMPlugin.html" title="class in com.SIMRacingApps"><code>SIMPlugin</code></a></li>
      <li><a href="../../../com/SIMRacingApps/Session.html" title="class in com.SIMRacingApps"><code>Session</code></a></li>
      <li><a href="../../../com/SIMRacingApps/Track.html" title="class in com.SIMRacingApps"><code>Track</code></a></li>
      <li><a href="../../../com/SIMRacingApps/Car.html" title="class in com.SIMRacingApps"><code>Car</code></a></li>
      <li><a href="../../../com/SIMRacingApps/Gauge.html" title="class in com.SIMRacingApps"><code>Gauge</code></a></li>
      <li><a href="../../../com/SIMRacingApps/TeamSpeak.html" title="class in com.SIMRacingApps"><code>TeamSpeak</code></a></li>
 </ul></div>
<dl>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>1.0</dd>
<dt><span class="simpleTagLabel">Author:</span></dt>
<dd>Jeffrey Gilliam</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../serialized-form.html#com.SIMRacingApps.servlets.Data">Serialized Form</a></dd>
<dt><span class="simpleTagLabel">Copyright:</span></dt>
<dd>Copyright (C) 2015 - 2022 Jeffrey Gilliam</dd>
<dt><span class="simpleTagLabel">License:</span></dt>
<dd>Apache License 2.0</dd>
</dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><span class="memberNameLink"><a href="../../../com/SIMRacingApps/servlets/Data.html#Data--">Data</a></span>()</code>
<div class="block">Default Constructor.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/SIMRacingApps/servlets/Data.html#destroy--">destroy</a></span>()</code>
<div class="block">Gets called when the container destroys this object</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/SIMRacingApps/servlets/Data.html#init-javax.servlet.ServletConfig-">init</a></span>(javax.servlet.ServletConfig&nbsp;config)</code>
<div class="block">Initializes the servlet by getting the IP address and version information.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.javax.servlet.http.HttpServlet">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;javax.servlet.http.HttpServlet</h3>
<code>service</code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.javax.servlet.GenericServlet">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;javax.servlet.GenericServlet</h3>
<code>getInitParameter, getInitParameterNames, getServletConfig, getServletContext, getServletInfo, getServletName, init, log, log</code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>equals, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="Data--">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>Data</h4>
<pre>public&nbsp;Data()</pre>
<div class="block">Default Constructor.</div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><code>HttpServlet()</code></dd>
</dl>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="init-javax.servlet.ServletConfig-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>init</h4>
<pre>public&nbsp;void&nbsp;init(javax.servlet.ServletConfig&nbsp;config)
          throws javax.servlet.ServletException</pre>
<div class="block">Initializes the servlet by getting the IP address and version information. 
 It displays this information in the log and in the title bar of the server window.
 The loadOnStartup option is enabled, so this gets called as soon as the server starts up.
 <p></div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code>init</code>&nbsp;in interface&nbsp;<code>javax.servlet.Servlet</code></dd>
<dt><span class="overrideSpecifyLabel">Overrides:</span></dt>
<dd><code>init</code>&nbsp;in class&nbsp;<code>javax.servlet.GenericServlet</code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>config</code> - The Servlet's configuration information.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>javax.servlet.ServletException</code> - Thrown so the server can log the error.</dd>
</dl>
</li>
</ul>
<a name="destroy--">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>destroy</h4>
<pre>public&nbsp;void&nbsp;destroy()</pre>
<div class="block">Gets called when the container destroys this object</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code>destroy</code>&nbsp;in interface&nbsp;<code>javax.servlet.Servlet</code></dd>
<dt><span class="overrideSpecifyLabel">Overrides:</span></dt>
<dd><code>destroy</code>&nbsp;in class&nbsp;<code>javax.servlet.GenericServlet</code></dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/Data.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../com/SIMRacingApps/servlets/ConsumerTester.html" title="class in com.SIMRacingApps.servlets"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../com/SIMRacingApps/servlets/DataEvent.html" title="class in com.SIMRacingApps.servlets"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?com/SIMRacingApps/servlets/Data.html" target="_top">Frames</a></li>
<li><a href="Data.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
